{% extends 'base.html' %}
{% load static %}
{% block content %}

<style>
  /* Add your CSS styles here */
  .event-list {
    text-align: center;
  }
  .event {
    display: inline-block;
    background-color: #2bb673;
    color: white;
    padding: 5px 10px;
    margin: 5px;
    border-radius: 5px;
  }
  .event .close-button {
    cursor: pointer;
    margin-left: 10px; /* You can adjust this value to control the spacing */
  }

  .event-list {
text-align: center;
margin-top: 50px; 
}
  
  .form-container {
    text-align: center;
    margin-top: 20px;
  } 

  .add-button {
    padding: 3px 5px;
    background-color: #2bb673;
    color: white;
    border: none;
    cursor: pointer;
  
    border-radius: 8px;
  }
  /* Hide the close icon by default */
.close-icon {
  display: none;
} 

/* Show the close icon when hovering over the button */
.event-button:hover .close-icon {
  display: inline-block;
}
/* Add custom styles to the button */
/* Custom styles for the button */
.btn.btn-primary.event-button {
width: 217px; /* Set the button width */
height: 70px; /* Set the button height */
background-color: #2bb673;
color: #fff;
border: none;
padding: 10px 20px;
border-radius: 5px;
font-size: 16px;
cursor: pointer;
margin-bottom: 10px; /* Add space below the button */
/* Add any other styles you want */
} 

/* Hover effect (optional) */
.btn.btn-primary.event-button:hover {
background-color: #0b2033;
/* Add any other hover effects you want */
}
/* Style for the event display container */
.event-list {
display: flex;
flex-wrap: wrap;
justify-content: center;
/* Adjust alignment as needed */
align-items: center;
}



/* Style for individual event items */
.event {
margin: 5px; /* Adjust the spacing between event */
padding: 10px;
background-color: #2bb673;
border: 1px solid #2bb673;
border-radius: 13px;
min-width: calc(25% - 10px); /* Four event per row, considering margins */
box-sizing: border-box;
text-align: center; /* Adjust text alignment as needed */
position: relative; /* To position the close button */
cursor: pointer; /* Add cursor pointer for hover effect */
display: flex;
flex-direction: column;
height: 70px; /* Set the desired height */
justify-content: space-between; /* Vertically align content */
width:180px;
}
/* Style for the event name */
.event-name {
flex: 1; /* Allow the event name to grow vertically */
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap; /* Prevent text from wrapping */
font-size: 16px; /* Adjust the font size as needed */
}
/* Style for the close button - Initially hidden */
.close-button {
position: absolute;
top: -2px;
right: 6px;
opacity: 0; /* Initially hidden */
color: rgba(195, 184, 184, 0.953);
font-weight: bold;
transition: opacity 0.3s; /* Add a smooth transition effect */
}



/* Show the close button on event hover */
.event:hover .close-button {
opacity: 1;
}

@media (max-width: 768px) {

  .event-list {

    flex-direction: column; /* Stack event vertically */

    align-items: center;

  }



  .event {

    width: 100%; /* Full width for mobile */

  }



  .add-button {

    margin-left: 0; /* Remove the left margin */

  }



  .event-name {

    font-size: 14px; /* Reduce font size for smaller screens */

  }

}

/* Example media query for screens with a minimum width of 1024px */

@media (min-width: 1024px) {

  .col-lg-8 {

    /* Adjust the width or any other styles for larger screens as needed */

    width: 70%;

  }



  .col-lg-4 {

    /* Adjust the width or any other styles for larger screens as needed */

    width: 30%;

  }

}



/* Similar media queries for 1440px and 2560px screens can be added */

@media (max-width: 1440px) {

  .col-lg-8 {

    /* Adjust the width or any other styles for larger screens as needed */

    width: 70%;

  }



  .col-lg-4 {

    /* Adjust the width or any other styles for larger screens as needed */

    width: 30%;

  }

}@media (min-width: 2560px) {

  .col-lg-8 {

    /* Adjust the width or any other styles for larger screens as needed */

    width: 70%;

  }



  .col-lg-4 {

    /* Adjust the width or any other styles for larger screens as needed */

    width: 30%;

  }

} 


  
    .font-weight-bold {
      color: #333;
      font-size: 24px;
      margin-bottom: 20px;
    }
  
    .form-container {
      background-color: #fff;
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 5px;
    }
  
    .event-form label {
      font-weight: bold;
      margin-bottom: 10px;
    }
  
    .event-form input[type="text"],
    .event-form input[type="email"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
  
    .event-form button {
      background-color: #2bb673;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  
    .event-form button:hover {
      background-color: #0b2033;
    }
  
  
    .event {
      margin: 10px;
      padding: 10px;
      background-color: #2bb673;
      color: white;
      border: 1px solid #2bb673;
      border-radius: 5px;
      min-width: calc(33.33% - 20px); /* Three event per row, considering margins */
      box-sizing: border-box;
      text-align: center;
      position: relative;
      cursor: pointer;
      display: flex;
      flex-direction: column;
    }
  
/* CSS for date picker fields */
.date-picker {
  width: 100%; /* Set the width to 100% to make it responsive */
  padding: 10px;
  margin-bottom: 20px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
  outline: none; /* Remove the default outline */
}


.event-input {
  padding: 5px;
  margin-right: 20px;
  outline: black;
  outline-width: 1px;
  outline-color: #282f3a47;
  box-shadow: none;
  outline-style: auto;
  width: 100%;
  height: 3rem;
  margin-bottom: 7rem;
}
/* Media query for screens with a maximum width of 768px */
@media (max-width: 768px) {
  .field-label {
    font-size: 16px; /* Reduce font size for smaller screens */
  }

  .event-input {
    width: 100%; /* Full width for mobile */
    margin-right: 0; /* Remove right margin */
  }
}

  
    /* Add media queries for responsiveness */
    @media (max-width: 768px) {
      .event {
        min-width: 100%; /* Full width for mobile */
      }
    }
  
    /* Additional styles for larger screens (adjust as needed) */
    @media (min-width: 1024px) {
      .event {
        min-width: calc(25% - 20px); 
      }
    }
    /* Apply the same styles to Startdate and Enddate fields as Event Name and Venue */
.field-label {
  /* Add your common styles here */
  font-size: 16px;
}

input, .form-control:focus, .asColorPicker-input:focus, .dataTables_wrapper select:focus, .jsgrid .jsgrid-table .jsgrid-filter-row input:focus[type=text], .jsgrid .jsgrid-table .jsgrid-filter-row select:focus, .jsgrid .jsgrid-table .jsgrid-filter-row input:focus[type=number], .select2-container--default .select2-selection--single:focus, .select2-container--default .select2-selection--single .select2-search__field:focus, .typeahead:focus, .tt-query:focus, .tt-hint:focus, input:focus, select:focus, textarea:focus, button:focus {
  outline: black;
  outline-width: 1px;
  outline-color: #282f3a47;
  box-shadow: none;
  outline-style: auto;
  max-width: 100%;
  height: 3rem;
  margin-bottom: 2rem;
  padding-right: 90px;
}
/* CSS for input fields */
.input-field {
  width: 100%; /* Make all fields take up 100% of their container width */
  padding: 10px;
  margin-bottom: 20px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
  outline: black;
  outline-width: 1px;
  outline-color: #282f3a47;
  box-shadow: none;
  outline-style: auto;
}
.event a {
  text-decoration: none; /* Remove underline */
  color: inherit; /* Inherit the color from the parent (white in this case) */
}

#id_start_date, #id_end_date {
  display: inline-block;
  vertical-align: middle; /* Adjust the vertical alignment as needed */
}
</style>
  
 <div class="main-panel">
    <div class="content-wrapper">
      <div class="row">
        <div class="col-md-12 grid-margin">
          <div class="row">
            <div class="col-md-12 grid-margin stretch-card">
              <div class="card h-100">
                <div class="card-body d-flex flex-column align-items-center justify-content-center text-center">
                  <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                    <h3 class="font-weight-bold">Add events</h3><br>
  
                    <!-- partial -->
                    <div class="form-container">
                      <form method="post" class="event-form">
                        {% csrf_token %}
                        <div class="row">

                          <div class="col-md-6 col-sm-6">
                            <label style="font-size: 20px;" for="{{ form.ename.id_for_label }}">Event Name:</label>
                            {{ form.ename }}
                          </div>
                          <div class="col-md-6 col-sm-6">
                            <label style="font-size: 20px;" for="{{ form.venue.id_for_label }}">Venue:</label><br>
                            <select id="{{ form.venue.id_for_label }}" class="input-field" name="{{ form.venue.name }}">
                                {% for choice in form.venue.field.choices %}
                                    <option value="{{ choice.0 }}" {% if choice.0 == form.venue.value %}selected{% endif %}>{{ choice.1 }}</option>
                                {% endfor %}
                            </select>
                          </div>
                          
                          <div class="col-md-6 col-sm-6">
                            <label style="font-size: 20px;" for="{{ form.startdate.id_for_label }}" class="field-label">Startdate:</label><br>
                            {{ form.start_date }}
                          </div>
                          <div class="col-md-6 col-sm-6">
                            <label style="font-size: 20px;" for="{{ form.enddate.id_for_label }}" class="field-label">Enddate:</label><br>
                            {{ form.end_date }}
                          </div>
                          
                        </div>
                        
                        <div class="row">
                            <div class="col-12 text-center">
                                <button type="submit" class="add-button">Add Event</button>
                            </div>
                        </div>
                        
                        
                      </form>
                    </div>
                    
                    <div id="event-display" class="event-list">
                        {% for event in events %}
                        <a href="{% url 'event_dashboard' username=request.user.username event_id=event.id %}">
                          <div class="event">
                            <div class="event-info">
                              <p style="font-size: 20px;"><b>{{ event.ename }}</b></p>
                              <p style="font-size: 10px;">{{ event.start_date }} - {{event.end_date}}</p>
                            </div></a>
                              <span class="close-button" onclick="removeEvent(this, '{{ event.ename }}')">x</span>
                          </div>
                        {% endfor %}
                     </div>
                      
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
     

<script>
  function removeEvent(closeButton, ename) {
    const eventElement = closeButton.parentElement;

    // Prompt for confirmation before removal
    if (confirm('Are you sure you want to remove this event?')) {
      eventElement.remove();

      // Send an AJAX request to remove the event from the database
      $.ajax({
        type: 'POST',
        url: '/remove_ename/', // Make sure this URL matches your Django URL configuration
        data: {
          'ename': ename,
          csrfmiddlewaretoken: '{{ csrf_token }}'
        },
        success: function(data) {
          console.log('Event removed from the database.');
        },
        error: function(xhr, textStatus, error) {
          console.error('Error removing event:', error);
        }
      });
    }
  }
</script>


{% endblock %}